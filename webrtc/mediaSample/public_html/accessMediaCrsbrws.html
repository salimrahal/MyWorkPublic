<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div><script>
          
             var errorCallback = function(e) {
                    console.log('Reeeejected!', e);
                };
                
            navigator.getUserMedia = navigator.getUserMedia ||
                    navigator.webkitGetUserMedia ||
                    navigator.mozGetUserMedia ||
                    navigator.msGetUserMedia;

            var video = document.querySelector('video');
/*
 * getUserMedia returns a stream on success, on fail it call the last function
 * navigator.getUserMedia(Constraints, successCallback, errorCallback);
 */
            if (navigator.getUserMedia) {
                navigator.getUserMedia({audio: true, video: true}, function(stream) {
                    console.log('preparing to crte stream...');
                    video.src = window.URL.createObjectURL(stream);
                }, errorCallback);
            } else {
                video.src = 'somevideo.webm'; // fallback.
                 console.log('fallback...');
            }</script></div>
    </body>
</html>
